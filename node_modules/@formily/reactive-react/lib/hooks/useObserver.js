"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useObserver = void 0;
var reactive_1 = require("@formily/reactive");
var useForceUpdate_1 = require("./useForceUpdate");
var useCompatFactory_1 = require("./useCompatFactory");
var useObserver = function (view, options) {
    var forceUpdate = (0, useForceUpdate_1.useForceUpdate)();
    var tracker = (0, useCompatFactory_1.useCompatFactory)(function () {
        return new reactive_1.Tracker(function () {
            if (typeof (options === null || options === void 0 ? void 0 : options.scheduler) === 'function') {
                options.scheduler(forceUpdate);
            }
            else {
                forceUpdate();
            }
        }, options === null || options === void 0 ? void 0 : options.displayName);
    });
    return tracker.track(view);
};
exports.useObserver = useObserver;
//# sourceMappingURL=useObserver.js.map