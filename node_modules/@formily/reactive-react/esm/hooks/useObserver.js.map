{"version":3,"file":"useObserver.js","sourceRoot":"","sources":["../../src/hooks/useObserver.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,mBAAmB,CAAA;AAE3C,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAA;AACjD,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAA;AAErD,MAAM,CAAC,IAAM,WAAW,GAAG,UACzB,IAAO,EACP,OAA0B;IAE1B,IAAM,WAAW,GAAG,cAAc,EAAE,CAAA;IACpC,IAAM,OAAO,GAAG,gBAAgB,CAC9B;QACE,OAAA,IAAI,OAAO,CAAC;YACV,IAAI,OAAO,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,SAAS,CAAA,KAAK,UAAU,EAAE;gBAC5C,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,CAAA;aAC/B;iBAAM;gBACL,WAAW,EAAE,CAAA;aACd;QACH,CAAC,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,WAAW,CAAC;IANxB,CAMwB,CAC3B,CAAA;IACD,OAAO,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AAC5B,CAAC,CAAA","sourcesContent":["import { Tracker } from '@formily/reactive'\nimport { IObserverOptions } from '../types'\nimport { useForceUpdate } from './useForceUpdate'\nimport { useCompatFactory } from './useCompatFactory'\n\nexport const useObserver = <T extends () => any>(\n  view: T,\n  options?: IObserverOptions\n): ReturnType<T> => {\n  const forceUpdate = useForceUpdate()\n  const tracker = useCompatFactory(\n    () =>\n      new Tracker(() => {\n        if (typeof options?.scheduler === 'function') {\n          options.scheduler(forceUpdate)\n        } else {\n          forceUpdate()\n        }\n      }, options?.displayName)\n  )\n  return tracker.track(view)\n}\n"]}