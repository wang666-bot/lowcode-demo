{"version":3,"file":"onFormEffects.js","sourceRoot":"","sources":["../../src/effects/onFormEffects.ts"],"names":[],"mappings":";;;AAAA,0CAAsC;AACtC,8CAAkD;AAElD,kCAAyC;AACzC,iDAAsD;AAEtD,SAAS,gBAAgB,CAAC,IAAoB;IAC5C,OAAO,IAAA,4BAAgB,EACrB,IAAI,EACJ,UAAC,IAAU,IAAK,OAAA,UAAC,QAA8B;QAC7C,IAAA,gBAAK,EAAC;YACJ,QAAQ,CAAC,IAAI,CAAC,CAAA;QAChB,CAAC,CAAC,CAAA;IACJ,CAAC,EAJe,CAIf,CACF,CAAA;AACH,CAAC;AAEY,QAAA,UAAU,GAAG,gBAAgB,CAAC,sBAAc,CAAC,YAAY,CAAC,CAAA;AAC1D,QAAA,WAAW,GAAG,gBAAgB,CAAC,sBAAc,CAAC,aAAa,CAAC,CAAA;AAC5D,QAAA,aAAa,GAAG,gBAAgB,CAAC,sBAAc,CAAC,eAAe,CAAC,CAAA;AAChE,QAAA,kBAAkB,GAAG,gBAAgB,CAChD,sBAAc,CAAC,qBAAqB,CACrC,CAAA;AACY,QAAA,yBAAyB,GAAG,gBAAgB,CACvD,sBAAc,CAAC,6BAA6B,CAC7C,CAAA;AACY,QAAA,iBAAiB,GAAG,gBAAgB,CAC/C,sBAAc,CAAC,oBAAoB,CACpC,CAAA;AACY,QAAA,YAAY,GAAG,gBAAgB,CAAC,sBAAc,CAAC,cAAc,CAAC,CAAA;AAC9D,QAAA,WAAW,GAAG,gBAAgB,CAAC,sBAAc,CAAC,aAAa,CAAC,CAAA;AAC5D,QAAA,iBAAiB,GAAG,gBAAgB,CAC/C,sBAAc,CAAC,oBAAoB,CACpC,CAAA;AACY,QAAA,eAAe,GAAG,gBAAgB,CAC7C,sBAAc,CAAC,kBAAkB,CAClC,CAAA;AACY,QAAA,mBAAmB,GAAG,gBAAgB,CACjD,sBAAc,CAAC,sBAAsB,CACtC,CAAA;AACY,QAAA,kBAAkB,GAAG,gBAAgB,CAChD,sBAAc,CAAC,qBAAqB,CACrC,CAAA;AACY,QAAA,yBAAyB,GAAG,gBAAgB,CACvD,sBAAc,CAAC,6BAA6B,CAC7C,CAAA;AACY,QAAA,2BAA2B,GAAG,gBAAgB,CACzD,sBAAc,CAAC,+BAA+B,CAC/C,CAAA;AACY,QAAA,0BAA0B,GAAG,gBAAgB,CACxD,sBAAc,CAAC,8BAA8B,CAC9C,CAAA;AACY,QAAA,uBAAuB,GAAG,gBAAgB,CACrD,sBAAc,CAAC,2BAA2B,CAC3C,CAAA;AACY,QAAA,mBAAmB,GAAG,gBAAgB,CACjD,sBAAc,CAAC,sBAAsB,CACtC,CAAA;AACY,QAAA,qBAAqB,GAAG,gBAAgB,CACnD,sBAAc,CAAC,wBAAwB,CACxC,CAAA;AACY,QAAA,oBAAoB,GAAG,gBAAgB,CAClD,sBAAc,CAAC,uBAAuB,CACvC,CAAA;AACY,QAAA,iBAAiB,GAAG,gBAAgB,CAC/C,sBAAc,CAAC,oBAAoB,CACpC,CAAA;AACY,QAAA,iBAAiB,GAAG,gBAAgB,CAC/C,sBAAc,CAAC,oBAAoB,CACpC,CAAA;AACY,QAAA,aAAa,GAAG,gBAAgB,CAAC,sBAAc,CAAC,eAAe,CAAC,CAAA;AAC7E,SAAgB,WAAW,CAAC,QAA+B;IACzD,IAAI,OAAO,GAAG,IAAI,CAAA;IAClB,IAAA,kBAAU,EAAC,UAAC,IAAI;QACd,OAAO,GAAG,IAAA,kBAAO,EAAC;YAChB,IAAI,IAAA,aAAI,EAAC,QAAQ,CAAC;gBAAE,QAAQ,CAAC,IAAI,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACJ,CAAC,CAAC,CAAA;IACF,IAAA,qBAAa,EAAC;QACZ,OAAO,EAAE,CAAA;IACX,CAAC,CAAC,CAAA;AACJ,CAAC;AAVD,kCAUC","sourcesContent":["import { isFn } from '@formily/shared'\nimport { autorun, batch } from '@formily/reactive'\nimport { Form } from '../models'\nimport { LifeCycleTypes } from '../types'\nimport { createEffectHook } from '../shared/effective'\n\nfunction createFormEffect(type: LifeCycleTypes) {\n  return createEffectHook(\n    type,\n    (form: Form) => (callback: (form: Form) => void) => {\n      batch(() => {\n        callback(form)\n      })\n    }\n  )\n}\n\nexport const onFormInit = createFormEffect(LifeCycleTypes.ON_FORM_INIT)\nexport const onFormMount = createFormEffect(LifeCycleTypes.ON_FORM_MOUNT)\nexport const onFormUnmount = createFormEffect(LifeCycleTypes.ON_FORM_UNMOUNT)\nexport const onFormValuesChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALUES_CHANGE\n)\nexport const onFormInitialValuesChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_INITIAL_VALUES_CHANGE\n)\nexport const onFormInputChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_INPUT_CHANGE\n)\nexport const onFormSubmit = createFormEffect(LifeCycleTypes.ON_FORM_SUBMIT)\nexport const onFormReset = createFormEffect(LifeCycleTypes.ON_FORM_RESET)\nexport const onFormSubmitStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_START\n)\nexport const onFormSubmitEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_END\n)\nexport const onFormSubmitSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_SUCCESS\n)\nexport const onFormSubmitFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_FAILED\n)\nexport const onFormSubmitValidateStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_START\n)\nexport const onFormSubmitValidateSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_SUCCESS\n)\nexport const onFormSubmitValidateFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_FAILED\n)\nexport const onFormSubmitValidateEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_END\n)\nexport const onFormValidateStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_START\n)\nexport const onFormValidateSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_SUCCESS\n)\nexport const onFormValidateFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_FAILED\n)\nexport const onFormValidateEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_END\n)\nexport const onFormGraphChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_GRAPH_CHANGE\n)\nexport const onFormLoading = createFormEffect(LifeCycleTypes.ON_FORM_LOADING)\nexport function onFormReact(callback?: (form: Form) => void) {\n  let dispose = null\n  onFormInit((form) => {\n    dispose = autorun(() => {\n      if (isFn(callback)) callback(form)\n    })\n  })\n  onFormUnmount(() => {\n    dispose()\n  })\n}\n"]}