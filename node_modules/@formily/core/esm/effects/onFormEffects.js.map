{"version":3,"file":"onFormEffects.js","sourceRoot":"","sources":["../../src/effects/onFormEffects.ts"],"names":[],"mappings":"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","sourcesContent":["import { isFn } from '@formily/shared'\nimport { autorun, batch } from '@formily/reactive'\nimport { Form } from '../models'\nimport { LifeCycleTypes } from '../types'\nimport { createEffectHook } from '../shared/effective'\n\nfunction createFormEffect(type: LifeCycleTypes) {\n  return createEffectHook(\n    type,\n    (form: Form) => (callback: (form: Form) => void) => {\n      batch(() => {\n        callback(form)\n      })\n    }\n  )\n}\n\nexport const onFormInit = createFormEffect(LifeCycleTypes.ON_FORM_INIT)\nexport const onFormMount = createFormEffect(LifeCycleTypes.ON_FORM_MOUNT)\nexport const onFormUnmount = createFormEffect(LifeCycleTypes.ON_FORM_UNMOUNT)\nexport const onFormValuesChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALUES_CHANGE\n)\nexport const onFormInitialValuesChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_INITIAL_VALUES_CHANGE\n)\nexport const onFormInputChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_INPUT_CHANGE\n)\nexport const onFormSubmit = createFormEffect(LifeCycleTypes.ON_FORM_SUBMIT)\nexport const onFormReset = createFormEffect(LifeCycleTypes.ON_FORM_RESET)\nexport const onFormSubmitStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_START\n)\nexport const onFormSubmitEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_END\n)\nexport const onFormSubmitSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_SUCCESS\n)\nexport const onFormSubmitFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_FAILED\n)\nexport const onFormSubmitValidateStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_START\n)\nexport const onFormSubmitValidateSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_SUCCESS\n)\nexport const onFormSubmitValidateFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_FAILED\n)\nexport const onFormSubmitValidateEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_SUBMIT_VALIDATE_END\n)\nexport const onFormValidateStart = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_START\n)\nexport const onFormValidateSuccess = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_SUCCESS\n)\nexport const onFormValidateFailed = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_FAILED\n)\nexport const onFormValidateEnd = createFormEffect(\n  LifeCycleTypes.ON_FORM_VALIDATE_END\n)\nexport const onFormGraphChange = createFormEffect(\n  LifeCycleTypes.ON_FORM_GRAPH_CHANGE\n)\nexport const onFormLoading = createFormEffect(LifeCycleTypes.ON_FORM_LOADING)\nexport function onFormReact(callback?: (form: Form) => void) {\n  let dispose = null\n  onFormInit((form) => {\n    dispose = autorun(() => {\n      if (isFn(callback)) callback(form)\n    })\n  })\n  onFormUnmount(() => {\n    dispose()\n  })\n}\n"]}