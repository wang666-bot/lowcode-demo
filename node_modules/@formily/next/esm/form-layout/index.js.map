{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/form-layout/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { createContext, useContext } from 'react'\nimport { useResponsiveFormLayout } from './useResponsiveFormLayout'\nimport { usePrefixCls } from '../__builtins__'\nimport cls from 'classnames'\n\nexport interface IFormLayoutProps {\n  prefix?: string\n  className?: string\n  style?: React.CSSProperties\n  colon?: boolean\n  labelAlign?: 'right' | 'left' | ('right' | 'left')[]\n  wrapperAlign?: 'right' | 'left' | ('right' | 'left')[]\n  labelWrap?: boolean\n  labelWidth?: number\n  wrapperWidth?: number\n  wrapperWrap?: boolean\n  labelCol?: number | number[]\n  wrapperCol?: number | number[]\n  fullness?: boolean\n  size?: 'small' | 'default' | 'large'\n  layout?:\n    | 'vertical'\n    | 'horizontal'\n    | 'inline'\n    | ('vertical' | 'horizontal' | 'inline')[]\n  direction?: 'rtl' | 'ltr'\n  inset?: boolean\n  shallow?: boolean\n  tooltipLayout?: 'icon' | 'text'\n  tooltipIcon?: React.ReactNode\n  feedbackLayout?: 'loose' | 'terse' | 'popover' | 'none'\n  bordered?: boolean\n  breakpoints?: number[]\n  gridColumnGap?: number\n  gridRowGap?: number\n  spaceGap?: number\n}\n\nexport interface IFormLayoutContext\n  extends Omit<\n    IFormLayoutProps,\n    'labelAlign' | 'wrapperAlign' | 'layout' | 'labelCol' | 'wrapperCol'\n  > {\n  labelAlign?: 'right' | 'left'\n  wrapperAlign?: 'right' | 'left'\n  layout?: 'vertical' | 'horizontal' | 'inline'\n  labelCol?: number\n  wrapperCol?: number\n}\n\nexport const FormLayoutDeepContext = createContext<IFormLayoutContext>(null)\n\nexport const FormLayoutShallowContext = createContext<IFormLayoutContext>(null)\n\nexport const useFormDeepLayout = () => useContext(FormLayoutDeepContext)\n\nexport const useFormShallowLayout = () => useContext(FormLayoutShallowContext)\n\nexport const useFormLayout = () => ({\n  ...useFormDeepLayout(),\n  ...useFormShallowLayout(),\n})\n\nexport const FormLayout: React.FC<React.PropsWithChildren<IFormLayoutProps>> & {\n  useFormLayout: () => IFormLayoutContext\n  useFormDeepLayout: () => IFormLayoutContext\n  useFormShallowLayout: () => IFormLayoutContext\n} = ({ shallow, children, prefix, className, style, ...otherProps }) => {\n  const { ref, props } = useResponsiveFormLayout(otherProps)\n  const deepLayout = useFormDeepLayout()\n  const formPrefixCls = usePrefixCls('form', { prefix })\n  const layoutPrefixCls = usePrefixCls('formily-layout', { prefix })\n  const layoutClassName = cls(\n    layoutPrefixCls,\n    {\n      [`${formPrefixCls}-${props.layout}`]: true,\n      [`${formPrefixCls}-rtl`]: props.direction === 'rtl',\n      [`${formPrefixCls}-${props.size}`]: props.size,\n    },\n    className\n  )\n  const renderChildren = () => {\n    const newDeepLayout = {\n      ...deepLayout,\n    }\n    if (!shallow) {\n      Object.assign(newDeepLayout, props)\n    } else {\n      if (props.size) {\n        newDeepLayout.size = props.size\n      }\n      if (props.colon) {\n        newDeepLayout.colon = props.colon\n      }\n    }\n    return (\n      <FormLayoutDeepContext.Provider value={newDeepLayout}>\n        <FormLayoutShallowContext.Provider value={shallow ? props : undefined}>\n          {children}\n        </FormLayoutShallowContext.Provider>\n      </FormLayoutDeepContext.Provider>\n    )\n  }\n  return (\n    <div ref={ref} className={layoutClassName} style={style}>\n      {renderChildren()}\n    </div>\n  )\n}\n\nFormLayout.defaultProps = {\n  shallow: true,\n}\n\nFormLayout.useFormDeepLayout = useFormDeepLayout\nFormLayout.useFormShallowLayout = useFormShallowLayout\nFormLayout.useFormLayout = useFormLayout\n\nexport default FormLayout\n"]}