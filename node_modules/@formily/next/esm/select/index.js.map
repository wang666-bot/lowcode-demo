{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/select/index.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,gBAAgB,CAAA;AACjE,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAA;AAC3C,OAAO,EAAE,MAAM,IAAI,UAAU,EAAE,MAAM,aAAa,CAAA;AAClD,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAA;AAC7C,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,iBAAiB,CAAA;AAEpD,IAAM,eAAe,GAAG,UAAC,UAAoB;IAApB,2BAAA,EAAA,eAAoB;IAC3C,IAAM,mBAAmB,GAAG,UAAC,IAAS;QACpC,IAAM,MAAM,gBAAQ,IAAI,CAAE,CAAA;QAC1B,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACpD,OAAO,MAAM,CAAC,QAAQ,CAAA;SACvB;aAAM;YACL,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;SAC3D;QACD,OAAO,MAAM,CAAA;IACf,CAAC,CAAA;IACD,OAAO,UAAU,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;AAC5C,CAAC,CAAA;AAED,MAAM,CAAC,IAAM,MAAM,GAAG,OAAO,CAC3B,UAAU,EACV,QAAQ,CACN,UAAC,KAAK,EAAE,KAAK;;IACX,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE;QACtB,OAAO,KAAK,CAAA;KACb;IACD,6BACK,KAAK,KACR,UAAU,EAAE,eAAe,CAAC,MAAA,KAAK,CAAC,UAAU,mCAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,UAAU,CAAC,IACnE;AACH,CAAC,EACD,OAAO,EACP,SAAS,CACV,EACD,aAAa,CAAC,WAAW,CAAC,MAAM,CAAC,CAClC,CAAA;AAED,eAAe,MAAM,CAAA","sourcesContent":["import { connect, mapReadPretty, mapProps } from '@formily/react'\nimport { isVoidField } from '@formily/core'\nimport { Select as NextSelect } from '@alifd/next'\nimport { PreviewText } from '../preview-text'\nimport { mapSize, mapStatus } from '../__builtins__'\n\nconst patchDataSource = (dataSource: any = []) => {\n  const removeEmptyChildren = (data: any) => {\n    const result = { ...data }\n    if (!result.children || result.children.length === 0) {\n      delete result.children\n    } else {\n      result.children = result.children.map(removeEmptyChildren)\n    }\n    return result\n  }\n  return dataSource.map(removeEmptyChildren)\n}\n\nexport const Select = connect(\n  NextSelect,\n  mapProps(\n    (props, field) => {\n      if (isVoidField(field)) {\n        return props\n      }\n      return {\n        ...props,\n        dataSource: patchDataSource(props.dataSource ?? field?.dataSource),\n      }\n    },\n    mapSize,\n    mapStatus\n  ),\n  mapReadPretty(PreviewText.Select)\n)\n\nexport default Select\n"]}