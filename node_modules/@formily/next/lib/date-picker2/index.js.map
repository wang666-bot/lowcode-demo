{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/date-picker2/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import moment from 'moment'\nimport { connect, mapProps, mapReadPretty } from '@formily/react'\nimport { DatePicker2 as NextDatePicker } from '@alifd/next'\nimport {\n  DatePickerProps as NextDatePickerProps,\n  RangePickerProps,\n} from '@alifd/next/lib/date-picker2'\nimport { PreviewText } from '../preview-text'\nimport {\n  formatMomentValue,\n  momentable,\n  mapSize,\n  mapStatus,\n} from '../__builtins__'\n\ntype DatePickerProps<PickerProps> = Exclude<\n  PickerProps,\n  'value' | 'onChange'\n> & {\n  value: string\n  onChange: (value: string | string[]) => void\n}\n\ntype ComposedDatePicker = React.FC<\n  React.PropsWithChildren<NextDatePickerProps>\n> & {\n  RangePicker?: React.FC<React.PropsWithChildren<RangePickerProps>>\n  MonthPicker?: React.FC<React.PropsWithChildren<NextDatePickerProps>>\n  YearPicker?: React.FC<React.PropsWithChildren<NextDatePickerProps>>\n  WeekPicker?: React.FC<React.PropsWithChildren<NextDatePickerProps>>\n  QuarterPicker?: React.FC<React.PropsWithChildren<NextDatePickerProps>>\n}\n\nconst mapDateFormat = function (type?: 'month' | 'year' | 'week' | 'quarter') {\n  const getDefaultFormat = (props: DatePickerProps<NextDatePickerProps>) => {\n    const _type = props['type'] || type\n    if (_type === 'month') {\n      return 'YYYY-MM'\n    } else if (_type === 'quarter') {\n      return 'YYYY-\\\\QQ'\n    } else if (_type === 'year') {\n      return 'YYYY'\n    } else if (_type === 'week') {\n      return 'YYYY-wo'\n    }\n    return props['showTime'] ? 'YYYY-MM-DD HH:mm:ss' : 'YYYY-MM-DD'\n  }\n\n  return (props: any) => {\n    const format = props['format'] || getDefaultFormat(props)\n    const onChange = props.onChange\n    return {\n      ...props,\n      format,\n      value: momentable(props.value, format === 'YYYY-wo' ? 'YYYY-w' : format),\n      onChange: (value: moment.Moment | moment.Moment[]) => {\n        if (onChange) {\n          onChange(formatMomentValue(value, format))\n        }\n      },\n    }\n  }\n}\n\nexport const DatePicker2: ComposedDatePicker = connect(\n  NextDatePicker,\n  mapProps(mapDateFormat(), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DatePicker)\n)\n\nDatePicker2.RangePicker = connect(\n  NextDatePicker.RangePicker,\n  mapProps(mapDateFormat(), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DateRangePicker)\n)\n\nDatePicker2.YearPicker = connect(\n  NextDatePicker.YearPicker,\n  mapProps(mapDateFormat('year'), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DatePicker)\n)\n\nDatePicker2.MonthPicker = connect(\n  NextDatePicker.MonthPicker,\n  mapProps(mapDateFormat('month'), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DatePicker)\n)\n\nDatePicker2.WeekPicker = connect(\n  NextDatePicker.WeekPicker,\n  mapProps(mapDateFormat('week'), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DatePicker)\n)\n\nDatePicker2.QuarterPicker = connect(\n  NextDatePicker.QuarterPicker,\n  mapProps(mapDateFormat('quarter'), mapSize, mapStatus),\n  mapReadPretty(PreviewText.DatePicker)\n)\n\nexport default DatePicker2\n"]}