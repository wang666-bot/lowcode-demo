!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.universalRequest=t():e.universalRequest=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=1)}([function(e,t){e.exports=require("universal-env")},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";n.r(t);var r,o=n(0);!function(e){e.json="json",e.text="text"}(r||(r={}));r.json;var a={url:"",headers:{"Content-Type":"application/json"},method:"GET",timeout:2e4,dataType:r.json},i=0,u={code:1,message:"Request timeout"};function s(e,t){return e?t+(-1===t.indexOf("?")?"?":"&")+function(e){if(!e)return"";var t=[];for(var n in e)void 0!==e[n]&&null!==e[n]&&t.push(n+"="+encodeURIComponent(String(e[n])));return t.join("&")}(e):t}function c(e){try{return JSON.stringify(e)}catch(t){return e||""}}function d(e){return"object"==typeof e&&null!==e}function f(e){return!(!e||!e["Content-Type"])&&String(e["Content-Type"]).toLowerCase().indexOf("application/x-www-form-urlencoded")>-1}var l={};function p(e){e.headers=Object.assign({Accept:"application/json, text/plain, */*"},e.headers);var t=Object.assign({withCredentials:!0,method:"GET",validateStatus:function(e){return e>=200&&e<300||304===e}},e),n=t.validateStatus,r=t.url,o=t.method,a=t.withCredentials,p=t.headers,m=t.data,y=t.timeout,h=t.dataType;return new Promise((function(e,t){var v,b,j,g=new XMLHttpRequest,T=function(){clearTimeout(v)};v=window.setTimeout((function(){T(),t(u),g.abort()}),y),g.onreadystatechange=function(){if(g&&4===g.readyState){if(T(),!n(g.status))return t({code:i,message:""+JSON.stringify({status:g.status})});var r=g.getAllResponseHeaders().trim().split(/[\r\n]+/),o={};r.forEach((function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");o[n]=r})),e({data:g.response,status:g.status,headers:o})}},g.responseType=h||"","GET"===o||f(p)?g.open(o,s(m,r),!0):g.open(o,r,!0),g.withCredentials=a,p&&Object.keys(p||[]).forEach((function(e){g.setRequestHeader(e,String(p[e]))})),d(b="GET"===o?null:m)&&(j=b,"[object Object]"===l.toString.call(j))&&(b=c(b)),g.send(b)}))}function m(e){return o.isWeb?p(e):null}function y(e){return o.isMiniApp?(t=e,new Promise((function(e,n){var r=t.url,o=t.method,a=t.data,u=t.dataType,s=t.headers,d=t.timeout;my.request({url:r,headers:s,method:o,data:a,timeout:d,dataType:u,success:function(t){e(t)},fail:function(e){n({code:i,message:c(e)})}})}))):null;var t}function h(e){return o.isWeex?(t=e,n=__weex_require__("@weex-module/stream"),new Promise((function(e,o){var a=Object.assign({},t),u=a.url,d=a.method,l=a.data,p=a.dataType,m=a.headers;"GET"===d&&l||f(m)?a.url=s(l,u):l&&(a.body=c(l)),a.isJSONP?(a.type="jsonp",delete a.isJSONP):p===r.json?a.type="json":a.type="text",n.fetch(a,(function(t){try{if("string"==typeof t&&(t=JSON.parse(t)).data&&"string"==typeof t.data&&t.ok)try{t.data=JSON.parse(t.data)}catch(e){throw new Error("the response.data in not valid json")}if(!0!==t.ok)throw t;e({headers:t.headers,status:t.status,data:t.data})}catch(e){o({code:i,message:c(e)})}}),(function(e){"FAILED"===e.status&&o({code:i,message:c(e)})}))}))):null;var t,n}function v(e){return o.isWeChatMiniProgram?(t=e,new Promise((function(e,n){var r,o=t.url,a=t.method,s=t.data,d=t.dataType,f=t.headers,l=t.timeout,p=wx.request({url:o,header:f,method:a,data:s,timeout:l,dataType:d,success:function(t){e(t)},fail:function(e){n({code:i,message:c(e)})},complete:function(){r&&clearTimeout(r)}});l&&(r=setTimeout((function(){p.abort(),n(u)}),l))}))):null;var t}function b(e){if(o.isByteDanceMicroApp)return t=e,new Promise((function(e,n){var r,o=t.url,a=t.method,s=t.data,d=t.dataType,f=t.headers,l=t.timeout,p=tt.request({url:o,headers:f,method:a,data:s,timeout:l,dataType:d,success:function(t){e(t)},fail:function(e){n({code:i,message:c(e)})},complete:function(){r&&clearTimeout(r)}});l&&(r=setTimeout((function(){p.abort(),n(u)}),l))}));var t}t.default=function(e){var t,n=Object.assign({},a,e,{method:(e.method||"GET").toUpperCase()});return e.headers=d(t=e.headers||{})?(["Accept","Content-Type"].forEach((function(e){Object.keys(t).some((function(n){return n.toUpperCase()===e.toUpperCase()&&n!==e&&(t[e]=t[n],delete t[n],!0)}))})),t):t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r]();if(o)return o}}(h.bind(null,n),m.bind(null,n),y.bind(null,n),b.bind(null,n),v.bind(null,n))}}])}));